/* Viết chương trình bấm phím CT1 đèn sáng, CT2 đèn tắt, CT3 đèn LED nhấp nháy theo trình tự sáng-tối-sáng-tối- sáng mãi. Trong lúc đang làm các tác vụ kể trên thị dòng chữ hello-world chay từ trái sang phải trên màn hình (trong timer)
*/
#include <io.h>
#include <alcd.h>
#include <delay.h>

#define BT1 PINB.0
#define BT2 PINB.2
#define BT3 PINB.3
#define LED PORTD.5

unsigned char x=0;
char dem, x, dem_1;
interrupt[TIM0_OVF] void timer0_ovf_isr(void) {
    TCNT0= 0x06;
    if(x==1){
        dem_1 = dem_1 + 1;
        if(dem_1 == 100) {
            dem = dem + 1;
            dem_1 = 0;}
        
        if(dem==10) {
            LED=1;
            }
        if(dem==20) {
            LED = 0;
            }
        if(dem==30) {
            LED = 1;
            }
        if(dem==40) { 
            LED = 0;
        }
        if(dem>=50){
            LED = 1;
            dem = 50;
        }
        }
        
    }


void main(void)
{
DDRB = 0x00;
PORTB = 0x0D;
DDRD = 0x20;

ASSR=0<<AS0;
TCCR0=0x03;
TCNT0=0x06;
OCR0=0x00;
TIMSK=0x01;
ETIMSK=0x00;

#asm("sei")

while (1)
  {
    if(BT1 == 0) {
        delay_ms(250);
        LED = 1;
        x = 0;
    }  
    
    if(BT2 == 0) {
        delay_ms(250);
        LED = 0;
        x = 0;
    }         
    
    if(BT3 == 0) {
        x = 1;
    }
    
    

  }
}

